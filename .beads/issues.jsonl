{"id":"work-34x","title":"Explore: Go CLI issue tracker design","description":"## Acceptance Criteria\n- Findings stored in bead design field (not filesystem)\n- Structured as Current State, Recommendation, and phased Next Steps\n- Each phase is independently actionable\n- Covers: storage format (JSONL vs alternatives), issue lifecycle, directory layout","design":"# Go CLI Issue Tracker: Design Research\n\n## 1. Current State\n\nSurveyed filesystem-based trackers: git-bug (Go, operation CRDTs),\ngit-issue (shell, dir-per-issue + file-per-attr), driusan/bug (Go,\nhuman-readable dirs), SIT (Rust, append-only records), Ditz (Ruby,\nYAML), ticgit (Ruby, git branch storage).\n\n**What works:** dir-per-issue (git-friendly, browsable), append-only\nops (audit trail), human-readable names, minimal formats.\n**What doesn't:** SHA naming, YAML type coercion, separate git\nbranches, git objects instead of files.\n\n## 2. Storage Format: JSON per issue + JSONL history\n\n**JSONL as sole store — rejected.** Single-file = git merge conflicts,\nconcurrent access issues, can't browse with filesystem tools.\n\n**Recommended hybrid:**\n- `issue.json` per issue — mutable current state, one `json.Unmarshal`\n- `history.jsonl` per issue — append-only event log, crash-safe audit\n\n| Format | Git merges | Go support | Human readable | Concurrent safe |\n|--------|-----------|------------|----------------|-----------------|\n| JSONL (single) | Poor | Excellent | Medium | Risky |\n| JSON per issue | Good | Excellent | Good | Safe |\n| YAML | Good | Slower | Good | Safe (type coercion bugs) |\n| Markdown+FM | Good | Custom parser | Excellent | Safe |\n| Dir-per-attr | Excellent | os.ReadFile | Excellent | Safe (many files) |\n\nJSON per issue wins on balance: git-friendly, stdlib-only, fast reads,\natomic updates, clean schema evolution.\n\n## 3. Lifecycle: 4 states\n\n```\nopen ──\u003e active ──\u003e done\n  │        │         ^\n  │        └─────────┘\n  └──\u003e cancelled\ndone ──\u003e open (reopen)\n```\n\n- `open` — exists, not started\n- `active` — being worked on\n- `done` — completed\n- `cancelled` — won't fix\n\nTransitions configurable via `config.json`. Shortcuts: `close` (done),\n`cancel`, `reopen`, `start` (active). Priority/labels/assignee are\northogonal metadata, not lifecycle states.\n\n## 4. Directory Layout\n\n```\n.issues/\n  config.json          # states, transitions, defaults\n  issues/\n    \u003c6-char-hex-id\u003e/\n      issue.json       # current state\n      history.jsonl    # append-only events\n      attachments/     # optional\n```\n\nID: 6-char hex (crypto/rand), prefix-addressable.\n\nExample issue.json:\n```json\n{\n  \"id\": \"a3f8b2\",\n  \"title\": \"Fix login timeout\",\n  \"status\": \"active\",\n  \"priority\": 2,\n  \"labels\": [\"bug\"],\n  \"assignee\": \"jim\",\n  \"created\": \"2026-02-15T10:30:00Z\",\n  \"updated\": \"2026-02-15T14:22:00Z\",\n  \"description\": \"...\"\n}\n```\n\nExample history.jsonl entry:\n```json\n{\"ts\":\"...\",\"op\":\"status\",\"from\":\"open\",\"to\":\"active\",\"by\":\"jim\"}\n```\n\n## 5. Next Steps\n\n**Phase 1: Core Data Model + Init**\n1. Go structs: Issue, Event, Config, Tracker\n2. ID generation (crypto/rand, 6-char hex)\n3. `init` command: create .issues/ + config.json\n4. JSON serialization + tests\n\n**Phase 2: CRUD Operations**\n5. `create` — generate ID, write issue.json + history event\n6. `show \u003cid\u003e` — read + display, prefix matching\n7. `list` — scan dir, display table\n8. `edit \u003cid\u003e` — modify fields, rewrite + event\n9. Edge case tests\n\n**Phase 3: Lifecycle + Transitions**\n10. `status \u003cid\u003e \u003cstate\u003e` — validate transition, update, event\n11. Transition validation engine from config\n12. Shortcuts: close, cancel, reopen, start\n13. Transition tests (valid, invalid, reopen)\n\n**Phase 4: Query + Filter**\n14. `list --status=open --label=bug --assignee=jim`\n15. Combinable filters + `--sort=priority|updated`\n16. Filter tests\n\n**Phase 5: History + Audit**\n17. `log \u003cid\u003e` — chronological events\n18. `history` — recent activity across all issues\n19. `--since`/`--until` time filters\n\n**Phase 6: Polish**\n20. `comment \u003cid\u003e \"text\"`\n21. `export` (JSON array to stdout)\n22. `--format=json` on all commands\n23. Shell completions\n24. Integration tests (full workflows)","status":"closed","priority":2,"issue_type":"task","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:12:10Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:17:29Z","closed_at":"2026-02-15T19:17:29Z","close_reason":"Converted to epic work-bav"}
{"id":"work-7pi","title":"Fix: show help text when no arguments provided","description":"## Acceptance Criteria\n- Running `issues` with no args shows full help with all commands listed\n- Findings stored in design field as phased structure\n- Consumable by /prepare for epic creation","design":"## Feedback Analysis\n\n**Phase 1: Bug Fixes**\n1. Show full help text in main.go:18-21 — currently prints bare\n   `usage: issues \u003ccommand\u003e [args]` when no args provided. Should\n   display all available commands with descriptions, matching the\n   command list from the zsh completion (lines 583-598).","status":"closed","priority":2,"issue_type":"task","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:41:12Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:44:01Z","closed_at":"2026-02-15T19:44:01Z","close_reason":"Converted to epic work-ot1"}
{"id":"work-bav","title":"Go CLI Issue Tracker","description":"Build a Go CLI issue tracker storing issues as JSON files in a\ndirectory structure (.issues/issues/\u003cid\u003e/issue.json) with append-only\nJSONL history per issue. 4-state lifecycle (open/active/done/cancelled)\nwith configurable transitions.\n\n## Success Criteria\n- `init` creates .issues/ with valid config.json\n- CRUD operations (create/show/list/edit) work with JSON-per-issue storage\n- Lifecycle transitions enforced per config, with shortcut commands\n- Filtering and sorting on list output\n- Append-only history log with query commands","status":"closed","priority":1,"issue_type":"epic","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:16:44Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:32:08Z","closed_at":"2026-02-15T19:32:08Z","close_reason":"All children completed"}
{"id":"work-bav.1","title":"Phase 1: Core Data Model + Init","description":"## Acceptance Criteria\n- [ ] Go structs defined: Issue, Event, Config, Tracker\n- [ ] ID generation via crypto/rand, 6-char hex\n- [ ] `init` command creates .issues/ dir + config.json with default states/transitions\n- [ ] JSON serialization round-trip tests pass","status":"closed","priority":2,"issue_type":"task","assignee":"Jim Myers","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:17:01Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:20:04Z","closed_at":"2026-02-15T19:20:04Z","close_reason":"Closed","dependencies":[{"issue_id":"work-bav.1","depends_on_id":"work-bav","type":"parent-child","created_at":"2026-02-15T11:17:01Z","created_by":"Jim Myers","metadata":"{}"}]}
{"id":"work-bav.2","title":"Phase 2: CRUD Operations","description":"## Acceptance Criteria\n- [ ] `create` generates ID, writes issue.json + history event\n- [ ] `show \u003cid\u003e` reads and displays issue, supports prefix matching\n- [ ] `list` scans issues dir, displays table\n- [ ] `edit \u003cid\u003e` modifies fields, rewrites issue.json + appends event\n- [ ] Edge case tests: empty tracker, duplicate prefixes, missing issues","status":"closed","priority":2,"issue_type":"task","assignee":"Jim Myers","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:17:02Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:22:49Z","closed_at":"2026-02-15T19:22:49Z","close_reason":"Closed","dependencies":[{"issue_id":"work-bav.2","depends_on_id":"work-bav","type":"parent-child","created_at":"2026-02-15T11:17:01Z","created_by":"Jim Myers","metadata":"{}"},{"issue_id":"work-bav.2","depends_on_id":"work-bav.1","type":"blocks","created_at":"2026-02-15T11:17:11Z","created_by":"Jim Myers","metadata":"{}"}]}
{"id":"work-bav.3","title":"Phase 3: Lifecycle + Transitions","description":"## Acceptance Criteria\n- [ ] `status \u003cid\u003e \u003cstate\u003e` validates transition against config, updates + events\n- [ ] Transition validation engine loads allowed transitions from config.json\n- [ ] Shortcut commands: close, cancel, reopen, start\n- [ ] Tests for valid transitions, invalid transitions, and reopen","status":"closed","priority":2,"issue_type":"task","assignee":"Jim Myers","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:17:02Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:25:03Z","closed_at":"2026-02-15T19:25:03Z","close_reason":"Closed","dependencies":[{"issue_id":"work-bav.3","depends_on_id":"work-bav","type":"parent-child","created_at":"2026-02-15T11:17:02Z","created_by":"Jim Myers","metadata":"{}"},{"issue_id":"work-bav.3","depends_on_id":"work-bav.2","type":"blocks","created_at":"2026-02-15T11:17:12Z","created_by":"Jim Myers","metadata":"{}"}]}
{"id":"work-bav.4","title":"Phase 4: Query + Filter","description":"## Acceptance Criteria\n- [ ] `list --status=open --label=bug --assignee=jim` filtering works\n- [ ] Filters are combinable (AND logic)\n- [ ] `list --sort=priority` and `--sort=updated` sorting\n- [ ] Filter combination tests + empty result tests","status":"closed","priority":2,"issue_type":"task","assignee":"Jim Myers","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:17:03Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:26:46Z","closed_at":"2026-02-15T19:26:46Z","close_reason":"Closed","dependencies":[{"issue_id":"work-bav.4","depends_on_id":"work-bav","type":"parent-child","created_at":"2026-02-15T11:17:02Z","created_by":"Jim Myers","metadata":"{}"},{"issue_id":"work-bav.4","depends_on_id":"work-bav.3","type":"blocks","created_at":"2026-02-15T11:17:12Z","created_by":"Jim Myers","metadata":"{}"}]}
{"id":"work-bav.5","title":"Phase 5: History + Audit","description":"## Acceptance Criteria\n- [ ] `log \u003cid\u003e` displays chronological events for one issue\n- [ ] `history` aggregates recent events across all issues\n- [ ] `--since` and `--until` time filters on history commands","status":"closed","priority":2,"issue_type":"task","assignee":"Jim Myers","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:17:03Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:28:51Z","closed_at":"2026-02-15T19:28:51Z","close_reason":"Closed","dependencies":[{"issue_id":"work-bav.5","depends_on_id":"work-bav","type":"parent-child","created_at":"2026-02-15T11:17:02Z","created_by":"Jim Myers","metadata":"{}"},{"issue_id":"work-bav.5","depends_on_id":"work-bav.4","type":"blocks","created_at":"2026-02-15T11:17:12Z","created_by":"Jim Myers","metadata":"{}"}]}
{"id":"work-bav.6","title":"Phase 6: Polish","description":"## Acceptance Criteria\n- [ ] `comment \u003cid\u003e \"text\"` appends comment event\n- [ ] `export` dumps all issues as JSON array to stdout\n- [ ] `--format=json` output flag on list/show commands\n- [ ] Shell completions for bash/zsh\n- [ ] Integration tests covering full workflow (init→create→start→comment→close→reopen→list)","status":"closed","priority":2,"issue_type":"task","assignee":"Jim Myers","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:17:03Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:31:48Z","closed_at":"2026-02-15T19:31:48Z","close_reason":"Closed","dependencies":[{"issue_id":"work-bav.6","depends_on_id":"work-bav","type":"parent-child","created_at":"2026-02-15T11:17:03Z","created_by":"Jim Myers","metadata":"{}"},{"issue_id":"work-bav.6","depends_on_id":"work-bav.5","type":"blocks","created_at":"2026-02-15T11:17:12Z","created_by":"Jim Myers","metadata":"{}"}]}
{"id":"work-ot1","title":"Show help text when no arguments provided","description":"Replace bare usage line with full help text listing all commands\nand descriptions when `issues` is invoked with no arguments.\n\n## Success Criteria\n- `issues` with no args prints usage header + all commands with\n  one-line descriptions\n- Exit code remains 1 (still an error, just more helpful)\n- Existing tests pass","status":"closed","priority":2,"issue_type":"epic","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:43:42Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:44:33Z","closed_at":"2026-02-15T19:44:33Z","close_reason":"Closed"}
{"id":"work-ot1.1","title":"Phase 1: Add printHelp function and call from no-args path","description":"## Acceptance Criteria\n- [ ] Add printHelp() listing all commands with descriptions\n- [ ] Call printHelp() from the no-args branch (main.go:18-21)\n- [ ] Match command list from zsh completion (lines 583-598)\n- [ ] All existing tests pass","status":"closed","priority":2,"issue_type":"task","owner":"jim.myers@jfmyers.dev","created_at":"2026-02-15T19:43:48Z","created_by":"Jim Myers","updated_at":"2026-02-15T19:44:33Z","closed_at":"2026-02-15T19:44:33Z","close_reason":"Closed","dependencies":[{"issue_id":"work-ot1.1","depends_on_id":"work-ot1","type":"parent-child","created_at":"2026-02-15T11:43:48Z","created_by":"Jim Myers","metadata":"{}"}]}
